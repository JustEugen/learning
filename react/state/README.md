# Component State / State / Стан компоненти

Одразу перейдемо до прикладів, так буде легше пояснювати. В тебе є задача, створити 2 кнопки, при настисканні на які, ти будеш або додавати, або відмінімати 1 до загальної кількості натискань, і цю загальну кількість натискань виводити користувачу на екран.

Спочатку накидаємо приблизний вигляд структури:

```jsx
export default function App() {
  return React.createElement('div', {}, [
    React.createElement('button', {}, 'add'),
    React.createElement('button', {}, 'minus'),
    React.createElement('div', {}, 'Count: 0'),
  ]);
}
```

З того що ми знаємо з javascript, для того щоб щось зберігати, існують змінні, тому слідуючи просто логіці, створимо змінну, яка буде зберігати кількість натискань і виведемо її в нашій `div`

```jsx
export default function App() {
  let clicksCount = 0;
  
  return React.createElement('div', {}, [
    React.createElement('button', {}, 'add'),
    React.createElement('button', {}, 'minus'),
    React.createElement('div', {}, 'Count: ' + clicksCount),
  ]);
}
```

Тепер, нам потрібно якось відслідкувати натискання на кнопку, для цього, в об'єкт атрибутів нам потрібно передати властивість onClick, в якості значення, ми передаємо функцію, ця функція буде виконуватися щоразу, як користувач натисне на кнопку, і ми будемо додавати, чи віднімати 1 від нашої змінної clicksCount

```jsx
export default function App() {
  let clicksCount = 0;
  
  return React.createElement('div', {}, [
    React.createElement('button', {
      onClick: () => {
        clicksCount = clicksCount + 1
      }
    }, 'add'),
    React.createElement('button', {
      onClick: () => {
        clicksCount = clicksCount - 1
      }
    }, 'minus'),
    React.createElement('div', {}, 'Count: ' + clicksCount),
  ]);
}
```

Але є один нюанс, цей приклад працювати не буде. Причина схована в тому, як працює оновлення компонента, рендер компонентів, та і цілком рендер в react. 

Якщо коротко, компоненти - це функції. Як тільки запускається наш react додаток, всі функції, тобто всі компоненти, виконуються, і повертають реакт елементи, які потім відображаються на екрані, нам же потрібно якось сказати реакту, що йому знову потрібно виконати всі функції, тобто всі компоненти, і показати на екран вірні данні.

Для цього в реакт існує така штука як я state, і якраз в ньому потрібно зберігати значення, які можуть змінюватися впродовж роботи додатка, в нашому випадку - це кількість натискань. Основний прикол цього стейта в тому, що як тільки він міняється, реакт заново викликає всі функції, і показує вже нові значення на екрані.

```jsx
export default function App() {
  // useState - це функція, яка повертає масив, де 
  // 0 - значення цього стейту
  // 1 - функція для оновлення стейту, для того щоб оновити стейт
  // ми повинні використовувати тільки цю функцію,
  // будь які інші способи не будуть працювати, і можуть призвести до дивних наслідків
  // також в цьому прикладі ми використовуємо деструктиризацію з присвоєнням, де для
  // 0 елемента - присвоюємо константу count
  // 1 елемента - присвоюємо константу setCount
  // Також useState в якості першого параметра приймає значення за замовчуванням
  // В нашому випадку - це чисно 0
  const [count, setCount] = useState(0);
  
  return React.createElement('div', {}, [
    React.createElement('button', {
      onClick: () => {
        setCount(count + 1);
      }
    }, 'add'),
    React.createElement('button', {
      onClick: () => {
        setCount(count - 1);
      }
    }, 'minus'),
    React.createElement('div', {}, 'Count: '),
  ]);
}
```

Ти можеш запитати, якщо кожного разу, як змінюється state, наша компонента викликається наново, то яким таким чином, ми зберігаємо правильне число кліків, тим паче, щоразу як наша компонента буде викликатися, useState також буде викликатися заново, та ще і з значенням по замовчуванням 0. 

І тут весь і розкривається весь серкер useState, він дозволяє тобі зберігати правильне значення стейту між ре-рендером компоненти. Тобто, якщо ми поставили в якості значення за замовчуванням 0, воно буде вставленне тільки перший раз, при першому рендері, томущо реакт, розуміє, що це перший рендер компоненти, в подальшому він буде його просто упускати.

Коли я вперше це побачив, мені воно здалося якоюсь магією, але навіть в документації написано, яким чином воно працює. Грубо кажучи, є певне місце ззовні, яке зберігає цю всю інформацію, і коли наша компонента робить перерендер, вона просто витягує потрібний стейт з певного місця за межами цієї функції

Окрім цього, є правила використання useState, його не можна викликати в середині функцій, мається на увазі, якщо ти в своїй компоненті ще якусь функцію створиш, то в ній то робити не можна, і також не можна викликати в середині if else, чи тернарних операторів, також не можна в середині циклів

Задачка: потрібно додати ще одну кнопку при натисканні на яку, все буде рісетатися до 0. 
