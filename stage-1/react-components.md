# Компоненти в React

### Використання встановлених пакетів

Переш за все, я хочу обговорити такий файл як `index.js`

<img src="./assets/react-components-01.png">

Зверни увагу на перші 3 рядки, ми тут використовуємо чарівне слово `import`, розберемося що це. 

В темі [Вступ](./intro.md) я вже розповідав про таку штуку як `Node.js`, за допомогою якої ми можемо ділити наш проєкт на файли, і перевикористовувати їх, а потім з цього всього вийде один єдиний `js` файл, який браузер буде мати змогу читати, окрім цього, ми можемо використовувати сторонні пакети, щоб не придумувати велосипеди. 

**Але яким чином, ми можемо використовувати шматки коду з інших файлів?**

Використовуючи слово `import` ми можемо отримати доступ до `змінних`, `констант`, `функцій`, які знаходяться в інших файлах або пакетах, які помічені як такі, що можна імпортувати. Тобто ти маєш право імпортувати тільки те, що ти дозволив, в файлі з якого ти робиш `import`.

Є декілька способів робити `import` і ти вже міг зауважити що `3` рядок відрізняється від `1-2`, але з цим ми розберемося пізніше.

**Перше що я хотів би роз'яснити - це яким способом `Node.js` розрізняє, треба імпортувати пакет чи щось з твого коду, і тут на справді все просто:**

- Якщо в строка, яку ти пишеш після слова `from` розпочинається з `./` чи `/`, тобто зі знака яким ми можемо вказати шлях, то це не пакет, а твій файл;
- Якщо строка розпочинається просто з тексту, тоді він буде шукати пакет з такою назвою. В випадку, якщо ти туди написав назву пакета, який в тебе не є встановленний, тоді воно не зможе його знайти, і в тебе просто вилетить помилка 

<img src="./assets/react-components-02.png">

**Також хочу роз'яснити декілька моментів стосовно імпортів пакетів:**

- Пакети - це не є щось абстрактне, вони фізичні, і всі встановленні пакети ти можеш знайти в папці `node_modules`. Кожен встановленний пакет буде мати свою папку, яка буде називатися таким самим іменем як і пакет. Тобто якщо в тебе пакет називається `qwerty`, то в папці `node_modules` буде папка з назвою `qwerty`;
- Коли ми пишемо `import ... from 'qwerty`, ось ця строка `qwerty` - це назва пакету. Тобто, якщо в тебе пакет називається `orc`, тоді `import` буде виглядати щось типу такого `import ... from 'orc'`;
- Ім'я пакетів унікальні, тобто не може бути 2 пакети з ідентичним іменем, для прикладу, у всьому світі може бути тільки один пакет з назвою `qwerty`;
- Як знати яким чином потрібно писати `import`? Так як є декілька способів імпортування, єдиний спосіб зрозуміти як імпортувати щось з пакету це або вгадати, або подивитися документацію проекта) тобто ніякого стандарту не існує, кожен дроче як він хоче.

Якщо подивишся на рядок 8, то ти можеш побачити що там використовується якийсь незрозумілий нам `ReactDOM` який ми імпортуємо з пакету `react-dom/client`. 

### Імпортування та експортування власних шматків коду

Як я казав раніше, ми не можемо імпортувати будь що, імпортувати ми можемо тільки те, що помічене словом `export`. Ліміту на експортування не має, з одного файла ми можемо експортувати хоть сотню змінних чи функцій

Коли ми імпортуємо щось, ми вказуємо що конкретне ми хочемо імпортувати, для прикладу, в тебе є файл, з якого можна імпортувати 100 функцій, але якщо нам потрібна тільки одна з них, ми можемо імпортувати тільки її, а не все.о імпортувати тільки те що нам потрібно.

Відкрий файл `App.js` і ти можеш побачити що в нас там є функція під назвою `App` перед якою стоїть слово `export`

<img src="./assets/react-components-03.png">

Використовуючи це слово `export` ми помічаємо цю функцію як таку, що можна імпортувати, що ми і робимо в файлі `index.js`

> Ще раз наголошу, браузери не підтримують `import` та `export`, це можливо тільки тут, томущо це все, потім буде зліплене в один файл, а всі ці `import` та `export` будуть видалені. Як це відбувається, і навіть приклад того як виглядає код після цієї ліпки ми розглянемо пізніше.

Тепер повернися до `index.js`

Тут потрібно запам'ятати _(Якщо що ми це ще не раз будемо робити)_, якщо ти щось експортуєш використовуючи слово `export функція_чи_змінна`, для того щоб імпортувати його ми використовуємо фігурні дужки

<img src="./assets/react-components-02.png">

Зверни увагу на 3 рядок, ми пишемо `import` далі відкриваємо фігурні дужки, пишемо `from` і звідки ми імпортуємо. В свою чергу в фігурних дужках ми дістаємо те, що було помічено словом `export`. В нашому випадку ми імпортуємо функцію `App`.

### Компоненти 

І нарешті ми добралися до головного - Компоненти. Одразу скажу, що в цьому туторіалі ми будемо тільки розбирати код, і ознайомимося тільки з частиною базового розуміння компоненти. Наступну частину ми розберемо коли розберемо як запускати код.

`Компонента` - це будівельні блоки в `React` як цегла в будинку, але вони мають відповідати декільком умовам:

- Це має бути функція;
- Назва функції обов'язково має бути з великої літери;
- Функція повинна повертати `HTML` який ти хочеш відобразити на екран, для прикладу `<div></div>`; 

**Зверни увагу, без дотримання цих вимог, воно тупо не буде працювати**!

> Як гарний тон, прийнято, що кожна компонента лежить в окремому файлі, який називається таким самим іменем як і функція, тобто, якщо твоя компонента називається `function Todo() {...}`, то файл буде називатися `Todo.js`; _Це просто правило гарного тону, не більше_ 

На даному етапі нашого додатка, в нас є одна єдина компонента, яка була згенерована при створенні проекту, відкрий `App.js`

<img src="./assets/react-components-03.png">

В нашому прикладі ми виконуємо всі умови компоненти, наша функція починається з великої літери, та вона повертає HTML.

Тут потрібно зауважити один дууууже важливий момент, на якому часто провтикують початківці, і не знають чому не працює.

Компонета повинна повертати тільки один елемент!

<img src="./assets/react-components-04.png">

Як можеш бачити, ми повертаємо тільки один елемент, в нашому випадку - це `div`, який в середині має безліч інших елементів, але, ми не можемо повернути 2 сусідніх елементи одночасно:

<img src="./assets/react-components-05.png">

Як ти можеш бачити, навіть на скріні webstorm підсвічує що є помилка в коді. Але інколи потрібно повернути два паралельних елементи, для цього, ми огортаємо їх в таку штуку як `<></>`:

<img src="./assets/react-components-06.png">

Таке робиться доволі рідко, і взагалі рахується поганим тоном.

Все це, ми ще будемо розгяладти в майбутньому, і будемо розглядати не тільки як використовувати, а як воно працює під капотом.

### Використання компонент

Як використовувати компоненту? По перше, як я казав, компоненти - це цеглини, з яких ми будуємо наш додаток, але якщо одну цеглину, ми використовуємо тільки один раз - компонента це як шаблон, і використовувати ми можемо її стільки разів, скільки ми хочемо, і там де ми хочемо, навіть використовувати одну компоненту в іншій компоненті, роблячи ніби композиції з компонентів.

Використовувати компоненту дууууже просто, так само як ми і використовуємо `HTML` теги, але для початку, давай розберемося ще з однією штукою.

Перш за все, будь яка програма має вхідний файл, тобто файл з якого все почанається, в випадку з `react` таким файлом є `index.js`.

<img src="./assets/react-components-02.png">

Ми не будемо вдаватися в деталі на разі, але подивися на 9 строку, там відбувається наступне, `react.render()` в який передається щось схоже на `HTML`, з цього шматка коду, запускається реакт додаток, все що ми сюди напишемо, відобразиться на екран _(в наступному туторіалі по практиці, ми це розберемо)_.

Зараз нас не цікавить, що таке `<React.StrictMode></React.StrictMode>`, нас цікавить тільки ось цей `<App />`

`<App />` це наша компонента, яку ми імпортували з файлу `App.js` на 5 рядку. Тут ми підходимо до головного правила використання компонентів. До компонентів, ми відносимся як до `HTML` тегів, пам'ятаєш, в `HTML` були парні теги як `div`, та непарні такі як `img`. Компоненти ми використовуємо як не парні теги в наступному форматі:

```jsx
<App />
```

Зверни увагу, що в `HTML` в непарних тегах, нам не потрібно було ставити цей символ в кінці `/`, але в `React` ти мусиш це робити не тільки для компонентів, а і до будь яких непарних тегів.

Якщо в `HTML` тег `img` ти писав як:

```html
<img src="https://www.goog.com/img">
```

То в `React` це буде виглядати наступним чином:

```jsx
<img src="https://www.goog.com/img" />
```

В кінець додається `/`.

І як я казав, компоненту ми можемо використовувати стільки разів, скільки завгодно:

<img src="./assets/react-components-07.png">

Залишилося тільки розібрати, за що відповідає 8 рядок та папка `public` 😅. Я знаю, така купа іфнормації виносить мозок, але потрібно хоча би в загальному розібрати це, і в подальших темах ссилатися на це, і ще в одному)

### Public та старт React
Перш за все, давай розберемо папку `Public` :) 

Раніше, коли не було штук типу реакту, для кожної сторінки в браузері, був окремо заготовленний `html` файл. Якщо в тебе було 3 сторінки на сайті, то в тебе і було 3 `html` файли. 

Для прикладу:

```shell
https://my-site.com - index.html
https://my-site.com/about - about.html
https://my-site.com/contact-us - contact-us.html
```

Але `React` - це single page application, тобто односторінковий додаток, він має лише однин єдинй `html` файл.

```shell
https://my-site.com - index.html
https://my-site.com/about - index.html
https://my-site.com/contact-us - index.html
```

Тоді ти можеш задатися питанням, а як ми тоді будемо відображати контент в залежності від сторінки. Відповідь дуже проста, зробити компонент, який буде репрезентувати кожну окрему сторінку, і в залежності від url показувати той чи інший компонент

```shell
https://my-site.com - index.html - показувати компонени Home.js
https://my-site.com/about - index.html - показувати компонени About.js
https://my-site.com/contact-us - index.html - показувати компонени ContactUs.js
```

Тепер пояснення нащо я то всьо щойно розказав 😅

В папці `public` в нас є тільки один єдиний файл, який називається `index.html` - це той самий файл `index.html` файл з прикладів вище, в ньому якраз і буде крутитися javascript твого `React` додатка.

Я видалив з нього все непотрібне, і от що отримав:

<img src="./assets/react-components-08.png">

Зверни увагу на 9 строку, там в нас є `div` з `id="root"`, саме в цьому тезі, буде відобржатаися наш реакт додаток, що я маю на увазі, повернись назад в `index.js`.

<img src="./assets/react-components-02.png">

І зверни увагу на 8 строку: 

<img src="./assets/react-components-09.png">

- На цій 8 строці ми створюємо React додаток, і записуємо його в константу `root`;
- Для того щоб створити React додаток, ми використовуємо об'єкт `ReactDOM` який ми імпортуємо з `react-dom/client` на 4 строці, а точніше використовуємо його метод `createRoot`.
- Метод `createRoot` приймає `HTML` елемент, в якому потрібно показувати `React` додаток
- І в кінці-кінців, на 12 строці ми передаємо в метод `render` те що потрібно вивести на екран

### Білд та збираємо все до купи

І так, на даному моменті, ми розібрали всю базу реакту, в плані того як воно працює, і що за що відповідає, тепер ми зберемо все до купи, і зрозуміємо що з того всього виходить в кінці.

Перше, що я хочу обговорити, я не раз говорив, про те, що `import` є тільки в `Node.js`, і браузер не вміє то читати, тому ми збираємо то до купи, щоб браузер міг то прочитати, як то всьо, зібрати до купи?

Заходимо в `package.json`, і знаходимо такий пункт як `scripts`

<img src="./assets/react-components-10.png">

Як я говорив в [Вступ](./intro.md#packagejson), в цьому місці в нас зберігаються наші `npm` скріпти. На разі нас цікавить скрипт `build`, якщо запустити його, то наш проект збере все до купи, і ми отримаємо штуку, яку може їсти браузер:

Для того щоб запустити `npm` скрипт, ми пишемо `npm run назва_скрипта`, тобто щоб запустити скрипт `build`, нам потрібно написати наступне:

```bash
npm run build
```

Цей процес може зайняти якийсь час, але не дуже багато, після чого в тебе згенерується папка, під назвою `build`, от що в ній має бути:

<img src="./assets/react-components-11.png">

В тебе згенерується наступна структура. В ній є `index.html` файл, без нього ніяк, і також в тебе є тільки один єдиний, `js` файл. Тепер з такою штукою, браузер зможе працювати. Окрім того, весь код, максимально мініфікований, якщо ти відкриєш `js` файл, ти побачиш наступне

<img src="./assets/react-components-12.png">

Як можеш бачити, тут повна, нечитабельна для наших очей каша, це зроблено спецільно, щоб максимально зменшити розмір файла. Але на цьому чудеса не закінчуються, якщо подивитися на наш `index.html` файл в папці `public`, ти можеш побачити, що ми не підключали ніякого `javascript` файла, і типу, яким чином, воно має працювати?

Ось цей `index.html` з `public` папки:

<img src="./assets/react-components-08.png">

Взагалі нічого про javascript. А от тут і є "магія". Діло в тому, що коли ми білдаємо наш проект, цей `index.html` файл в папці `public` береться як шаблон, як основа, після того як javascript буде згенерований, цей білд, сам автоматично, додасть script тег в index.html.

Ось дивись, відкриваю `index.html` файл з папки `build`

<img src="./assets/react-components-13.png">

Зверни увагу на 7 рядок, ми це не писали, воно саме його додало, коли ми білдали проект під браузер. І це тільки маленька частина можливостей, які ми маємо, коли дойдемо до css, то взагалі ахуєєш)

Підсумую що робить `build`

1. Генерує один єдиний `js` файл _(до речі, от ті цифри, завжди будуть мінятися, це для того, щоб кешування не працювало)_. Він бере `index.js` файл з `src` і крок за кроком, збирає всі `js` файли які використовуються.
2. Копіює твій `index.html` файл з папки `public` додає туди тег `script` який підключає раніше згенерований `js` файл.

Але, тут є один останній нюанс, `build` ми використовуємо тільки для фінального варіанту коду, який ми будемо загружати на сервер, для розробки ми використовуємо команду `start`, це вже ми розберемо в наступній статті, але ця команда робить все теж саме, просто вона не оптимізовує код, тому дуже швидко ребілдить проект.
